# AgentGroupChat vs GroupChatOrchestration: å®é™…è¿ç§»è¯„ä¼°æŠ¥å‘Š

## ğŸ¯ æ‰§è¡Œæ€»ç»“

ç»è¿‡æ·±å…¥çš„ä»£ç æµ‹è¯•å’Œé”™è¯¯åˆ†æï¼Œæˆ‘ä»¬å‘ç° **GroupChatOrchestration å½“å‰ä¸é€‚åˆç”Ÿäº§ç¯å¢ƒè¿ç§»**ã€‚

## ğŸ” å‘ç°çš„å…³é”®é—®é¢˜

### 1. **æ–‡æ¡£ä¸ä¸€è‡´æ€§ä¸¥é‡**
ä¸åŒçš„å®˜æ–¹æ–‡æ¡£å’Œç¤ºä¾‹æ˜¾ç¤ºäº†ç›¸äº’çŸ›ç›¾çš„ API è°ƒç”¨æ–¹å¼ï¼š
- æŸäº›ç¤ºä¾‹ï¼š`await group_chat.invoke(task)`
- æŸäº›ç¤ºä¾‹ï¼š`await group_chat.invoke(kernel, task)`  
- å®é™…è¦æ±‚ï¼š`await group_chat.invoke(task, runtime)`

### 2. **å¤æ‚çš„è¿è¡Œæ—¶æ¶æ„è¦æ±‚**
- éœ€è¦ `CoreRuntime` å¯¹è±¡ï¼Œè€Œä¸æ˜¯ç®€å•çš„ `Kernel`
- `CoreRuntime` éœ€è¦ `register_factory` æ–¹æ³•
- æ¶‰åŠå¤æ‚çš„ Agent æ³¨å†Œå’Œæ¶ˆæ¯ä¼ é€’æœºåˆ¶
- ç¼ºä¹æ¸…æ™°çš„åˆ›å»º `CoreRuntime` çš„æ–‡æ¡£

### 3. **Pydantic æ¨¡å‹éªŒè¯é™åˆ¶**
- ä¸èƒ½åœ¨ `__init__` ä¸­è®¾ç½®é Pydantic å­—æ®µ
- è‡ªå®šä¹‰å±æ€§å¿…é¡»æ­£ç¡®å®šä¹‰ä¸º Pydantic å­—æ®µ
- é™åˆ¶äº†ç­–ç•¥è¿ç§»çš„çµæ´»æ€§

### 4. **å®éªŒæ€§åŠŸèƒ½çš„ä¸ç¨³å®šæ€§**
- API æ ‡è®°ä¸º `@experimental`ï¼Œæ„å‘³ç€å¯èƒ½ä¼šæœ‰ç ´åæ€§å˜æ›´
- é”™è¯¯å¤„ç†ä¸å¤Ÿå¥å£®
- ç¼ºä¹ç”Ÿäº§ç¯å¢ƒçš„æˆç†Ÿåº¦

## ğŸš¨ å®é™…æµ‹è¯•ç»“æœ

### å°è¯•1ï¼šåŸºæœ¬è¿ç§»
```python
# âŒ å¤±è´¥
result = await group_chat.invoke(TASK)
# é”™è¯¯ï¼šTypeError: OrchestrationBase.invoke() missing 1 required positional argument: 'runtime'
```

### å°è¯•2ï¼šæ·»åŠ  Kernel
```python
# âŒ å¤±è´¥  
kernel = Kernel()
result = await group_chat.invoke(kernel, TASK)
# é”™è¯¯ï¼š'str' object has no attribute 'register_factory'
```

### å°è¯•3ï¼šä¿®å¤ Pydantic éªŒè¯
```python
# âŒ éƒ¨åˆ†æˆåŠŸï¼Œä½†ä»æœ‰è¿è¡Œæ—¶é”™è¯¯
# Pydantic éªŒè¯é€šè¿‡ï¼Œä½†è¿è¡Œæ—¶æ¶æ„è¦æ±‚å¤æ‚
```

## ğŸ“Š è¿ç§»å¯è¡Œæ€§è¯„ä¼°

| è¯„ä¼°ç»´åº¦ | AgentGroupChat | GroupChatOrchestration | è¯„åˆ† |
|---------|---------------|----------------------|------|
| **API ç¨³å®šæ€§** | âœ… ç¨³å®š | âŒ å®éªŒæ€§ï¼Œä¸ç¨³å®š | AgentGroupChat èƒœå‡º |
| **æ–‡æ¡£å®Œæ•´æ€§** | âœ… å®Œæ•´å‡†ç¡® | âŒ ä¸ä¸€è‡´ï¼Œæœ‰é”™è¯¯ | AgentGroupChat èƒœå‡º |  
| **å­¦ä¹ æˆæœ¬** | âœ… ç®€å•ç›´è§‚ | âŒ å¤æ‚ï¼Œéœ€è¦æ·±å…¥ç†è§£è¿è¡Œæ—¶ | AgentGroupChat èƒœå‡º |
| **è¿ç§»é£é™©** | âœ… æ— éœ€è¿ç§» | âŒ é«˜é£é™©ï¼Œå¯èƒ½æ— æ³•æ­£å¸¸å·¥ä½œ | AgentGroupChat èƒœå‡º |
| **åŠŸèƒ½ä¸°å¯Œæ€§** | âš ï¸ åŸºç¡€åŠŸèƒ½ | âœ… æ›´ä¸°å¯Œï¼ˆå¦‚æœèƒ½å·¥ä½œçš„è¯ï¼‰ | GroupChatOrchestration èƒœå‡º |
| **æœªæ¥æ”¯æŒ** | âŒ ä¸å†ç»´æŠ¤ | âœ… æœªæ¥æ–¹å‘ | GroupChatOrchestration èƒœå‡º |

## ğŸ› ï¸ å®ç”¨å»ºè®®

### å¯¹äºç°æœ‰é¡¹ç›®ï¼ˆæ¨èï¼‰
```python
# âœ… ç»§ç»­ä½¿ç”¨ AgentGroupChat
# ç†ç”±ï¼šç¨³å®šã€å¯é ã€æ–‡æ¡£å®Œæ•´

group_chat = AgentGroupChat(
    agents=agents,
    selection_strategy=CustomSelectionStrategy(),
    termination_strategy=CustomTerminationStrategy(agents=agents)
)

await group_chat.add_chat_message(
    ChatMessageContent(role=AuthorRole.USER, content=task)
)

async for response in group_chat.invoke():
    print(f"==== {response.name} å“åº” ====")
```

### å¯¹äºæ–°é¡¹ç›®
```python
# âš ï¸ è°¨æ…è€ƒè™‘æ˜¯å¦ä½¿ç”¨ GroupChatOrchestration
# å»ºè®®ï¼šå…ˆç”¨ AgentGroupChat å¼€å‘ï¼Œç­‰å¾… GroupChatOrchestration ç¨³å®šåå†è¿ç§»
```

### å¯¹äºå¿…é¡»è¿ç§»çš„é¡¹ç›®
```python
# ğŸ”§ ç­‰å¾…ä»¥ä¸‹æ¡ä»¶æ»¡è¶³ï¼š
# 1. å®˜æ–¹æä¾›å®Œæ•´çš„è¿ç§»æŒ‡å—
# 2. CoreRuntime åˆ›å»ºæ–‡æ¡£å®Œå–„  
# 3. API ä» @experimental è½¬ä¸ºç¨³å®šç‰ˆæœ¬
# 4. ç¤¾åŒºæœ‰æˆåŠŸçš„è¿ç§»æ¡ˆä¾‹
```

## ğŸ“‹ è¿ç§»æ£€æŸ¥æ¸…å•

### è¿ç§»å‰å¿…é¡»ç¡®è®¤ï¼š
- [ ] **å®˜æ–¹æ–‡æ¡£ä¸€è‡´æ€§**ï¼šç¡®ä¿ invoke æ–¹æ³•çš„è°ƒç”¨æ–¹å¼åœ¨æ‰€æœ‰æ–‡æ¡£ä¸­ä¸€è‡´
- [ ] **CoreRuntime åˆ›å»ºæŒ‡å—**ï¼šæœ‰æ¸…æ™°çš„æ–‡æ¡£è¯´æ˜å¦‚ä½•åˆ›å»ºå’Œé…ç½® CoreRuntime
- [ ] **é”™è¯¯å¤„ç†ç¨³å®šæ€§**ï¼šèƒ½å¤Ÿä¼˜é›…å¤„ç†å„ç§å¼‚å¸¸æƒ…å†µ
- [ ] **ç¤¾åŒºæˆåŠŸæ¡ˆä¾‹**ï¼šæœ‰å…¶ä»–å¼€å‘è€…æˆåŠŸè¿ç§»çš„æŠ¥å‘Š
- [ ] **å›æ»šè®¡åˆ’**ï¼šå¦‚æœè¿ç§»å¤±è´¥ï¼Œèƒ½å¤Ÿå¿«é€Ÿå›æ»šåˆ° AgentGroupChat

### å½“å‰çŠ¶æ€ï¼ˆ2024å¹´è¯„ä¼°ï¼‰ï¼š
- [ ] æ–‡æ¡£ä¸€è‡´æ€§ âŒ
- [ ] CoreRuntime æŒ‡å— âŒ  
- [ ] é”™è¯¯å¤„ç†ç¨³å®šæ€§ âŒ
- [ ] ç¤¾åŒºæˆåŠŸæ¡ˆä¾‹ âŒ
- [ ] ç®€å•çš„è¿ç§»è·¯å¾„ âŒ

## ğŸ¯ æœ€ç»ˆå»ºè®®

### ç«‹å³è¡ŒåŠ¨ï¼š
1. **ç»§ç»­ä½¿ç”¨ AgentGroupChat** - åœ¨å½“å‰é¡¹ç›®ä¸­ä¿æŒä½¿ç”¨ï¼Œç¡®ä¿ç¨³å®šæ€§
2. **ç›‘æ§å®˜æ–¹æ›´æ–°** - å®šæœŸæ£€æŸ¥ GroupChatOrchestration çš„æ–‡æ¡£å’Œ API å˜æ›´
3. **å‡†å¤‡è¿ç§»ä»£ç ** - ç¼–å†™è¿ç§»è„šæœ¬ï¼Œä½†ä¸è¦ç«‹å³éƒ¨ç½²

### ç­‰å¾…æ¡ä»¶ï¼š
1. **å®˜æ–¹ç¨³å®šç‰ˆæœ¬** - GroupChatOrchestration ä» @experimental è½¬ä¸ºç¨³å®š
2. **å®Œæ•´è¿ç§»æŒ‡å—** - Microsoft æä¾›è¯¦ç»†çš„è¿ç§»æ–‡æ¡£
3. **ç¤¾åŒºéªŒè¯** - æœ‰æˆåŠŸçš„è¿ç§»æ¡ˆä¾‹å’Œæœ€ä½³å®è·µ

### æ—¶é—´é¢„ä¼°ï¼š
- **çŸ­æœŸï¼ˆ1-3ä¸ªæœˆï¼‰**ï¼šç»§ç»­ä½¿ç”¨ AgentGroupChat
- **ä¸­æœŸï¼ˆ3-6ä¸ªæœˆï¼‰**ï¼šå¯†åˆ‡å…³æ³¨ GroupChatOrchestration çš„ç¨³å®šæ€§è¿›å±•  
- **é•¿æœŸï¼ˆ6ä¸ªæœˆ+ï¼‰**ï¼šè€ƒè™‘è¿ç§»åˆ°ç¨³å®šç‰ˆæœ¬çš„ GroupChatOrchestration

## ğŸ“š å‚è€ƒèµ„æº

- [å½“å‰é¡¹ç›®çš„å·¥ä½œç¤ºä¾‹](main.py) - ä½¿ç”¨ AgentGroupChat çš„ç¨³å®šå®ç°
- [è¿ç§»å°è¯•ä»£ç ](main_groupchat_migration_fixed.py) - å±•ç¤ºäº†é‡åˆ°çš„é—®é¢˜
- [å®˜æ–¹æ–‡æ¡£](https://learn.microsoft.com/semantic-kernel/frameworks/agent/agent-orchestration/group-chat) - éœ€è¦ç­‰å¾…æ›´æ–°

---

**ç»“è®º**ï¼šè™½ç„¶ GroupChatOrchestration ä»£è¡¨äº†æœªæ¥çš„æ–¹å‘ï¼Œä½†å½“å‰çš„å®ç°è¿˜ä¸å¤Ÿæˆç†Ÿï¼Œæ— æ³•å®‰å…¨åœ°è¿›è¡Œç”Ÿäº§ç¯å¢ƒè¿ç§»ã€‚å»ºè®®ç»§ç»­ä½¿ç”¨ AgentGroupChatï¼ŒåŒæ—¶ç›‘æ§æ–°æ¶æ„çš„ç¨³å®šæ€§è¿›å±•ã€‚
